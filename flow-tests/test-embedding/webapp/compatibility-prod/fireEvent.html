<!--

    Copyright (C) 2000-2024 Vaadin Ltd

    This program is available under Vaadin Commercial License and Service Terms.

    See <https://vaadin.com/commercial-license-and-service-terms> for the full
    license.

-->
<!doctype html>

<head>
  <script type="text/javascript" src="/vaadin/web-component/fire-event.html"></script>
</head>

<body>
  <p>
    Web components updates property as a response to a button click.
  </p>

  <fire-event id="calc"></fire-event>
  <p id="sum">0</p>
  <p id="error"></p>

  <div id="container">
      <div id="sub-container">
          <fire-event id="contained"></fire-event>
      </div>
  </div>
  <p id="contained-result"></p>
  <p id="inner-result"></p>
  <p id="outer-result"></p>

  <script>
    // basic test
    var calc = document.getElementById("calc");
    var sum = document.getElementById("sum");
    var error = document.getElementById("error");

    calc.addEventListener("sum-calculated", function(event) {
      sum.innerHTML = event.detail;
    });

    calc.addEventListener("sum-error", function(event) {
      error.innerHTML = event.detail;
    });

    // event options test
    var container = document.getElementById("container");
    var subContainer = document.getElementById("sub-container");
    var contained = document.getElementById("contained");
    var innerResult = document.getElementById("inner-result");
    var outerResult = document.getElementById("outer-result");
    var containedResult = document.getElementById("contained-result");

    subContainer.addEventListener("button-event", function(event) {
        innerResult.innerHTML = event.detail;
        event.preventDefault();
    });
    container.addEventListener("button-event", function(event) {
        if (event.defaultPrevented) {
            outerResult.innerHTML = "prevented";
        } else {
            outerResult.innerHTML = event.detail;
        }
    });
    contained.addEventListener("button-event", function(event) {
        containedResult.innerHTML = event.detail;
    });
    const time = Date.now();
    window.addEventListener("load", event => {
      const newElement = document.createElement("div");
      newElement.id = "created";
      newElement.innerText = Date.now() - time;
      document.body.appendChild(newElement);
    });
  </script>

</body>
